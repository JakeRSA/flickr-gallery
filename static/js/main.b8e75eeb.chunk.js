(this["webpackJsonpcra-version"]=this["webpackJsonpcra-version"]||[]).push([[0],{41:function(t,e,a){},42:function(t,e,a){},73:function(t,e,a){},74:function(t,e,a){},83:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a(2),i=a.n(n),o=a(5),c=a.n(o),r=(a(41),a(6)),h=a(7),l=a(9),g=a(8),m=(a(42),a(10)),u=a(33),d=a.n(u),j=a(11),b=a(12),p=a(17),O=a.n(p);a(73);O.a.setAppElement("#root");var f=function(t){Object(l.a)(a,t);var e=Object(g.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).state={rotation:0,hidden:!1,showLarge:!1,brightness:100,contrast:100,hue:0,saturation:100},s}return Object(h.a)(a,[{key:"hideImage",value:function(){this.setState({hidden:!0})}},{key:"rotateImage",value:function(){this.state.rotation<270?this.setState((function(t){return{rotation:t.rotation+90}})):this.setState({rotation:0})}},{key:"showLarge",value:function(){this.setState({showLarge:!0})}},{key:"urlFromDto",value:function(t){return"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,".jpg")}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"image-root",style:{width:this.props.imageSize+"px",height:this.props.imageSize+"px",display:this.state.hidden?"none":"inline-block"},children:[Object(s.jsx)("img",{className:"thumbnail-img",src:this.urlFromDto(this.props.dto),style:{filter:"brightness(".concat(this.state.brightness,"%) contrast(").concat(this.state.contrast,"%) hue-rotate(").concat(this.state.hue,"deg) saturate(").concat(this.state.saturation,"%)"),transform:"rotate(".concat(this.state.rotation,"deg)")}}),Object(s.jsx)(O.a,{isOpen:this.state.showLarge,onRequestClose:function(){t.setState({showLarge:!1})},className:"image-modal",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("span",{className:"modal-header",children:[Object(s.jsxs)("span",{className:"modal-title-span",children:[Object(s.jsx)("p",{children:this.props.dto.title?this.props.dto.title:"untitled image"}),Object(s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:this.urlFromDto(this.props.dto),download:!0,children:Object(s.jsx)(j.a,{icon:b.a,title:"download image",className:"modal-icon"})})]}),Object(s.jsx)(j.a,{icon:b.d,title:"close",className:"modal-icon",onClick:function(){t.setState({showLarge:!1})}})]}),Object(s.jsx)("img",{src:this.urlFromDto(this.props.dto),style:{maxWidth:"100%",maxHeight:"100%",filter:"brightness(".concat(this.state.brightness,"%) contrast(").concat(this.state.contrast,"%) hue-rotate(").concat(this.state.hue,"deg) saturate(").concat(this.state.saturation,"%)")}}),Object(s.jsxs)("span",{className:"modal-footer",children:[Object(s.jsxs)("span",{children:[Object(s.jsx)("label",{htmlFor:"brightness",children:"brightness"}),Object(s.jsx)("input",{id:"brightness",type:"range",min:"0",max:"200",value:this.state.brightness,onChange:function(e){t.setState({brightness:e.target.value})}})]}),Object(s.jsxs)("span",{children:[Object(s.jsx)("label",{htmlFor:"contrast",children:"contrast"}),Object(s.jsx)("input",{id:"contrast",type:"range",min:"0",max:"200",value:this.state.contrast,onChange:function(e){t.setState({contrast:e.target.value})}})]}),Object(s.jsxs)("span",{children:[Object(s.jsx)("label",{htmlFor:"hue",children:"hue"}),Object(s.jsx)("input",{id:"hue",type:"range",min:"-180",max:"180",value:this.state.hue,onChange:function(e){t.setState({hue:e.target.value})}})]}),Object(s.jsxs)("span",{children:[Object(s.jsx)("label",{htmlFor:"saturation",children:"saturation"}),Object(s.jsx)("input",{id:"saturation",type:"range",min:"0",max:"200",value:this.state.saturation,onChange:function(e){t.setState({saturation:e.target.value})}})]})]})]})}),Object(s.jsxs)("div",{children:[Object(s.jsx)(j.a,{className:"image-icon",icon:b.c,title:"rotate",onClick:function(){t.rotateImage()}}),Object(s.jsx)(j.a,{className:"image-icon",icon:b.e,title:"delete",onClick:function(){t.hideImage()}}),Object(s.jsx)(j.a,{className:"image-icon",icon:b.b,title:"expand",onClick:function(){t.showLarge()}})]})]})}}]),a}(i.a.Component),x=(a(74),a(18)),v=a(34),S=a.n(v),I=a(35),y=Object(x.b)((function(t){var e=t.key,a=t.index,n=t.dto,i=t.imageSize;return Object(s.jsx)(f,{index:a,dto:n,imageSize:i},e)})),k=Object(x.a)((function(t){var e=t.images,a=t.imageSize,n=t.imagesPerRow,i=t.imagesInDOM,o=t.loadMoreImages;return Object(s.jsx)(I.a,{className:"gallery-root",style:{gridTemplateColumns:"repeat(".concat(n,", 1fr)")},dataLength:i,next:o,hasMore:i<e.length,children:e.slice(0,i).map((function(t,e){return Object(s.jsx)(y,{index:e,dto:t,imageSize:a},"image-"+t.id)}))})})),z=function(t){Object(l.a)(a,t);var e=Object(g.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).state={targetSize:200,images:[],imageSize:200,imagesPerRow:5,imagesInDOM:0},s.calcImageSize=s.calcImageSize.bind(Object(m.a)(s)),s.onSortEnd=s.onSortEnd.bind(Object(m.a)(s)),s.loadMoreImages=s.loadMoreImages.bind(Object(m.a)(s)),s}return Object(h.a)(a,[{key:"getImages",value:function(t){var e=this;this.setState({images:[],imagesInDOM:0});var a="services/rest/?method=flickr.photos.search&api_key=522c1f9009ca3609bcbaf08545f067ad&tags=".concat(t,"&tag_mode=any&per_page=4000&format=json&nojsoncallback=1");d()({url:a,baseURL:"https://api.flickr.com/",method:"GET"}).then((function(t){return t.data})).then((function(t){t&&t.photos&&t.photos.photo&&t.photos.photo.length>0&&e.setState({images:t.photos.photo}),t.photos.photo.length>=100?e.setState({imagesInDOM:100}):e.setState({imagesInDOM:t.photos.photo.length}),e.calcImageSize()}))}},{key:"componentDidMount",value:function(){this.getImages(this.props.tag),window.addEventListener("resize",this.calcImageSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.calcImageSize)}},{key:"componentWillReceiveProps",value:function(t){this.getImages(t.tag)}},{key:"calcImageSize",value:function(){var t=document.body.clientWidth,e=Math.floor(t/this.state.targetSize),a=t/e;this.setState({imageSize:a,imagesPerRow:e})}},{key:"onSortEnd",value:function(t){var e=t.oldIndex,a=t.newIndex;this.setState((function(t){var s=t.images;return{images:S()(s,e,a)}}))}},{key:"loadMoreImages",value:function(){this.state.images.length>this.state.imagesInDOM+100?this.setState((function(t){return{imagesInDOM:t.imagesInDOM+=100}})):this.setState({imagesInDOM:this.state.images.length})}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{children:[this.state.images.length>0&&Object(s.jsxs)("div",{className:"gallery-settings",children:[Object(s.jsx)("label",{htmlFor:"targetSize",children:"thumbnail size"}),Object(s.jsx)("input",{id:"targetSize",type:"range",min:150,max:300,onChange:function(e){t.setState({targetSize:e.target.value}),t.calcImageSize()}})]}),Object(s.jsx)(k,{axis:"xy",images:this.state.images,imageSize:this.state.imageSize,imagesPerRow:this.state.imagesPerRow,onSortEnd:this.onSortEnd,imagesInDOM:this.state.imagesInDOM,loadMoreImages:this.loadMoreImages})]})}}]),a}(i.a.Component),w=function(t){Object(l.a)(a,t);var e=Object(g.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).state={tag:"art"},t}return Object(h.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"app-root",children:[Object(s.jsxs)("div",{className:"app-header",children:[Object(s.jsx)("h2",{children:"Flickr Gallery"}),Object(s.jsx)("input",{className:"app-input",onChange:function(e){return t.setState({tag:e.target.value})},value:this.state.tag})]}),Object(s.jsx)(z,{tag:this.state.tag})]})}}]),a}(i.a.Component),M=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,84)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,i=e.getLCP,o=e.getTTFB;a(t),s(t),n(t),i(t),o(t)}))};c.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),M()}},[[83,1,2]]]);
//# sourceMappingURL=main.b8e75eeb.chunk.js.map